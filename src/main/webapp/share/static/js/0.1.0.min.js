require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/**
 * cookie操作类
 * @author    姚尧 <yaogaoyu@qq.com>
 */
var cookie = function () {
    /**
     * 获取指定cooike。
     */
    this.gCookie = function (n) {
        if (!n) return null;
        if (document.cookie.length > 0) {
            var start = document.cookie.indexOf(n + "=");
            if (start != -1) {
                start = start + n.length + 1 ;
                var end = document.cookie.indexOf(";", start);
                if (end == -1) end = document.cookie.length;
                return document.cookie.substring(start, end);
            }
        }
        return null;
    };

    /**
     * 写cooike。
     */
    this.sCookie = function (n, v, t) {
        if (!n || !v) return;
        var val = n + "=" + v + ";";
        //domain=.dahao.de;
        if (t) {
            val += "expires=" + t;
        }
        document.cookie = val + "path=/;";
    };
};

module.exports = new cookie();
},{}],2:[function(require,module,exports){
var _login = function () {
    this.perform = function(){
        console.log("login page");
    };
}

module.exports = new _login();
},{}],3:[function(require,module,exports){
/**
 * 节点管理页面功能脚本
 * @author    姚尧 <yaogaoyu@qq.com>
 */
var _nodes = function() {
    var contextPath = $("#p").attr("ref");
    var alertDialog = {
        title: '提示',
        okValue: '确定',
        ok: function() {}
    };
    var confirmDialog = {
        title: '请确定',
        okValue: '确定',
        cancelValue: '取消',
        cancel: function() {}
    };

    var prompt = dialog({
        content: "<span class='col loading'>请稍候，正在等待处理结果。</span><img class='col loading' src='"+contextPath + "/s/images/loading.gif"+"'>",
        cancel: false
    });
    /**
     * 初始化节点管理页面方法
     */
    this.perform = function () {
        nodeGroup = $(".nodePanel").attr("class").match(/\s\S+/)[0].replace(/^\s+/, "");
        if (nodeGroup == "master") {
            performMaster();
        } else {
            performSlaver();
        }
    };

    // 清除服务端和客户端的公共事件
    var clearCommonEvents = function() {
        $(".selectBtn").unbind("click");
        $(".nodeRow:not(.serverNode)").unbind("click");
    };

     // 清除服务端和客户端的公共事件
    var addCommonEvents = function() {
        // 全选按钮添加点击事件
        $(".selectBtn").click(function (ev) {
            ev.preventDefault();
            // ev.stopPropagation();
            toggleSelectAll();
        });
        // 表格中的行点击事件
        $(".nodeRow:not(.serverNode .hide)").click(function(ev) {
            ev.preventDefault();
            // ev.stopPropagation();
            toggleSelectRow($(this));
        });
    };

    /**
     * 主库节点管理页面初始化方法
     */
    var performMaster = function() {
        addCommonEvents();
        // 展开按钮
        $(".operationBtn").click(function(ev) {
            ev.preventDefault();
            ev.stopPropagation();
            toggleOperaBtns();
        });
        // 空白处关闭
        $(document).click(function(ev) {
            ev.preventDefault();
            ev.stopPropagation();
            $(".operationFuncs").addClass("hide");
        });

        // 注册通过按钮点击事件
        $(".passBtn").click(function(ev) {
            ev.stopPropagation();
            ev.preventDefault();
            passRegistration();
        });

        // 注册拒绝通过按钮点击事件
        $(".refuseBtn").click(function(ev) {
            ev.stopPropagation();
            ev.preventDefault();
            refuseRegistration();
        });

        // 删除子节点按钮
        $(".delNodeBtn").click(function(ev) {
            ev.stopPropagation();
            ev.preventDefault();
            delChildrenNodes();
        });

        // 实时监控注册请求
        moniteRegistedRequest();
        var monite = setInterval(function(){
            moniteRegistedRequest();
        }, 1000 * 30);

        // 实时监控注册请求
        var autoRefresh = setInterval(function(){
            refreshNodes();
        }, 1000 * 30);
    };

    /**
     * 从库节点管理页面初始化方法
     */
    var performSlaver = function() {

    };

    /**
     * 选中全部/取消选中按钮功能
     */
    var toggleSelectAll = function() {
        var checkbox = $($(".selectBtn").children(".icon")[0]);
        var text = $($(".selectBtn").children(".btnName")[0]);
        var isChecked = checkbox.attr("class").match(/icon-checkbox-checked/) != null && checkbox.attr("class").match(/icon-checkbox-checked/).length > 0;
        checkbox.removeClass(isChecked ? "icon-checkbox-checked" : "icon-checkbox-unchecked");
        checkbox.addClass(isChecked ? "icon-checkbox-unchecked" : "icon-checkbox-checked");
        text.html(isChecked ? "选择全部" : "取消选择");
        isChecked = !isChecked;
        if (isChecked) {
            $(".nodeRow:not(.serverNode, .hide)").addClass("selected");
        } else {
            $(".nodeRow:not(.serverNode, .hide)").removeClass("selected");
        }
    };

     /**
     * 选中/取消选中行功能
     */
    var toggleSelectRow = function(row) {
        var isSelected = row.attr("class").match(/selected/) != null && row.attr("class").match(/selected/).length > 0;
        row.removeClass(isSelected ? "selected" : "");
        row.addClass(isSelected ? "" : "selected");
    };

    /**
     * 显示/隐藏操作按钮
     */
    var toggleOperaBtns = function() {
        var isShow = !$(".operationFuncs").attr("class").match(/hide/);
        $(".operationFuncs").removeClass(isShow ? "" : "hide");
        $(".operationFuncs").addClass(isShow ? "hide" : "");
    };

    /**
     * 注册通过按钮点击事件
     */
    var passRegistration = function() {
        var selectedUnregisted = getSelectedUnregistedExid();
        if (selectedUnregisted.length == 0) {
            var popup = dialog(alertDialog);
            popup.content("<span class='alert'><span class='icon icon-notification'></span><span class='title'>请至少选择一个未注册的从库节点。</span>");
            popup.showModal();
            return;
        }

        // 取得被选中的从库节点数据
        new Promise(function (resolve, reject) {
            // 弹出窗口确定
            confirmDialog.ok = function () {
                confirm.close();
                prompt.showModal();
                resolve();
            }
            confirmDialog.cancel = function () {
                confirm.close();
                reject();
            }
            var confirm = dialog(confirmDialog);
            confirm.content("<span class='confirm'><span class='icon icon-question'></span><span class='title'>您选中了"+selectedUnregisted.length+"个未注册的从库节点，确定将这些从库节点通过注册吗？</span>");
            confirm.showModal();
        }).then(function(resolve, reject){
            $.post(contextPath + "/nodes/allow", {"nodes": selectedUnregisted}, function(respData) {
                if (respData["code"] == "1") {
                    prompt.close();
                    window.location.reload();
                } else {
                    prompt.content("<span class='col loading'>"+respData['msg']+"</span><img class='col loading' src='"+contextPath + "/s/images/loading.gif'>");
                    setTimeout(function(){
                        prompt.close();
                    }, 2000);
                }
            }, "json");
        })["catch"](function(){});

        toggleOperaBtns();
    };

    /**
     * 注册拒绝通过按钮点击事件
     */
    var refuseRegistration = function() {
        var selectedUnregisted = getSelectedUnregistedExid();
        if (selectedUnregisted.length == 0) {
            var popup = dialog(alertDialog);
            popup.content("<span class='alert'><span class='icon icon-notification'></span><span class='title'>请至少选择一个未注册的从库节点。</span>");
            popup.showModal();
            return;
        }

        // 取得被选中的从库节点数据
        new Promise(function (resolve, reject) {
            // 弹出窗口确定
            confirmDialog.ok = function () {
                confirm.close();
                prompt.showModal();
                resolve();
            }
            confirmDialog.cancel = function () {
                confirm.close();
                reject();
            }
            var confirm = dialog(confirmDialog);
            confirm.content("<span class='confirm'><span class='icon icon-question'></span><span class='title'>您选中了"+selectedUnregisted.length+"个未注册的从库节点，确定拒绝这些从库节点的注册请求吗？</span>");
            confirm.showModal();
        }).then(function(resolve, reject){
            $.post(contextPath + "/nodes/refuse", {"nodes": selectedUnregisted}, function(respData) {
                if (respData["code"] == "1") {
                    prompt.close();
                    window.location.reload();
                } else {
                    prompt.content("<span class='col loading'>"+respData['msg']+"</span><img class='col loading' src='"+contextPath + "/s/images/loading.gif'>");
                    setTimeout(function(){
                        prompt.close();
                    }, 2000);
                }
            }, "json");
        })["catch"](function(){});

        toggleOperaBtns();
    };

    /**
     * 删除从库节点按钮
     */
    var delChildrenNodes = function() {
        // 取得被选中的从库节点数据
        var selectedRegisted = getSelectedRegistedExid();
        if (selectedRegisted.length != 1) {
            var popup = dialog(alertDialog);
            popup.content("<span class='alert'><span class='icon icon-notification'></span><span class='title'>只能选择一个已注册的从库节点进行移除。</span>");
            popup.showModal();
            return;
        }

        new Promise(function (resolve, reject) {
            // 弹出窗口确定
            confirmDialog.ok = function () {
                confirm.close();
                prompt.showModal();
                resolve();
            }
            confirmDialog.cancel = function () {
                confirm.close();
                reject();
            }
            var confirm = dialog(confirmDialog);
            confirm.content("<span class='confirm'><span class='icon icon-question'></span><span class='title'>确定彻底移除选中的从库节点吗？</span>");
            confirm.showModal();
        }).then(function(resolve, reject){
            var ex = selectedRegisted[0];
            $.post(contextPath + "/api/engine/removenode", {"nodeId": ex}, function(respData) {
                prompt.close();
                window.location.reload();
            }, "json");
        })["catch"](function(){
            prompt.close();
        });

        toggleOperaBtns();
    };

    /**
     * 是否有选中数据
     */
    var validate = function() {
        return $(".selected").length > 0;
    };

    /**
     * 获取所有被选中未注册的从库节点ID
     */
    var getSelectedUnregistedExid = function() {
        var selectedRows = $(".selected .ex");
        var exidArr = [];
        for (var j = 0 ; j < selectedRows.length ; j++) {
            var nodeInfo = $(selectedRows[j]).html();
            var exid = nodeInfo.split(",")[0];
            var isRegisted = nodeInfo.split(",")[1] == "true";
            if (!isRegisted) exidArr.push(exid);
        }
        return exidArr;
    };

    /**
     * 获取所有被选中已注册的从库节点ID
     */
    var getSelectedRegistedExid = function() {
        var selectedRows = $(".selected .ex");
        var exidArr = [];
        for (var j = 0 ; j < selectedRows.length ; j++) {
            var nodeInfo = $(selectedRows[j]).html();
            var exid = nodeInfo.split(",")[0];
            var isRegisted = nodeInfo.split(",")[1] == "true";
            if (isRegisted) exidArr.push(exid);
        }
        return exidArr;
    };

    /**
     * 获取所有未注册的从库节点ID
     */
    var getAlldUnregistedExid = function() {
        var childExids = $(".childNode:not(.hide) .ex");
        var exidArr = [];
        for (var j = 0 ; j < childExids.length ; j++) {
            var nodeInfo = $(childExids[j]).html();
            var exid = nodeInfo.split(",")[0];
            var isRegisted = nodeInfo.split(",")[1] == "true";
            if (!isRegisted) exidArr.push(exid);
        }
        return exidArr;
    };

    /**
     * 刷新节点列表
     */
    var refreshNodes = function() {
        $.post(contextPath + "/nodes/refresh", null, function(data){
            var list = data["data"];
            var template = $(".nodeRow.childNode.hide");
            if (list.length > 0 ) {
                $(".childNode:not(.hide):not(.reqReg)").detach();
            }
            for (var x = 0 ; x < list.length ; x++) {
                var rowData = list[x];
                if (rowData["group"] == "master") continue;
                var row = template.clone();
                var col = row.children("span");
                $(col[0]).html(rowData["externalId"]+","+rowData["isRegistration"]);
                $($(col[1]).children("span")[1]).html(rowData["externalId"]);
                $(col[2]).html(rowData["group"] == "master" ? "主库" : "从库");
                $(col[3]).html(rowData["isRegistration"] ? "已注册" : "未注册");
                $(col[4]).html(rowData["lastHeartbeats"]);
                $(col[5]).html(rowData["syncUrl"]);
                $(col[6]).html(rowData["database"]);
                $(col[7]).html(rowData["dbVersion"]);
                row.removeClass("hide");
                template.before(row);
            }
            clearCommonEvents();
            addCommonEvents();
        }, "json");
    };

    /**
     * 监视注册请求
     */
    var moniteRegistedRequest = function() {
        var unregistedExid = getAlldUnregistedExid();
        $.post(contextPath + "/nodes/unregistration", null, function(data){
            var list = data["data"];
            var template = $(".nodeRow.childNode.hide");
            for (var x = 0 ; x < list.length ; x++) {
                var rowData = list[x];
                if (unregistedExid.indexOf(rowData["externalId"]) > -1) continue;
                var row = template.clone();
                var col = row.children("span");
                $(col[0]).html(rowData["externalId"]+",false");
                $($(col[1]).children("span")[1]).html(rowData["externalId"]);
                $(col[2]).html(rowData["nodeGroupId"] == "master" ? "主库" : "从库");
                $(col[3]).html("未注册");
                $(col[4]).html("?");
                $(col[5]).html("?");
                $(col[6]).html("?");
                $(col[7]).html("?");
                row.addClass("reqReg");
                row.removeClass("hide");
                $(".listHeader").after(row);
            }
            clearCommonEvents();
            addCommonEvents();
        }, "json");
    };
}

module.exports = new _nodes();
},{}],4:[function(require,module,exports){
var _setting = function () {
    /**
     * 初始化setting页面方法
     */
    this.perform = function (attributesParam){};
};

module.exports = new _setting();
},{}],5:[function(require,module,exports){
/**
 * 侧边栏功能脚本
 * @author    姚尧 <yaogaoyu@qq.com>
 */
var sideBar = function () {
    var contextPath = $("#p").attr("ref");
    var cookie = require("./_cookie");
    var isOpen = cookie.gCookie("sideBar.open") ? cookie.gCookie("sideBar.open") == "true" ? true : false : true;
    // 按显示顺序设置模块, 按访问连接取名
    var modules = ["_state", "_nodes", "_setting"];
    var buddle = dialog({
        align: 'right'
    });
    /**
     * 初始化侧边栏方法
     */
    this.perform = function () {
        // 设置侧边栏默认打开状态
        if (!isOpen) {
            $(".sideBar").removeClass(isOpen ? "mini" : "full");
            $(".sideBar").addClass(isOpen ? "full" : "mini");
            $(".centerFrame").removeClass(isOpen ? "miniSideBar" : "fullSideBar");
            $(".centerFrame").addClass(isOpen ? "fullSideBar" : "miniSideBar");
            $(".indent .icon").removeClass(isOpen ? "icon-indent-increase" : "icon-indent-decrease");
            $(".indent .icon").addClass(isOpen ? "icon-indent-decrease" : "icon-indent-increase");
            miniModulehover();
        }
        // 设置默认选中模块
        setActived();
        // 添加侧边栏缩放事件
        $(".indent").click(function () {
            isOpen = !isOpen;
            $(".sideBar").removeClass(isOpen ? "mini" : "full");
            $(".sideBar").addClass(isOpen ? "full" : "mini");
            $(".centerFrame").removeClass(isOpen ? "miniSideBar" : "fullSideBar");
            $(".centerFrame").addClass(isOpen ? "fullSideBar" : "miniSideBar");
            $(".indent .icon").removeClass(isOpen ? "icon-indent-increase" : "icon-indent-decrease");
            $(".indent .icon").addClass(isOpen ? "icon-indent-decrease" : "icon-indent-increase");
            // 侧边栏状态写入cookie
            cookie.sCookie("sideBar.open", isOpen + "");
            // 添加侧边栏模块hover样式
            miniModulehover();
        });
        // 设置侧边栏是否启用
        var isEngineStarted = $(".modules").attr("class").match(/\sstarted$/);
        if (isEngineStarted) {
            enabled();
        }
        //添加模块点击事件
        $(".module").click(function(ev) {
            ev.preventDefault();
            var isDisabled = $(this).attr("class").match(/\sdisable$/);
            if (isDisabled) return;
            var currPage = $("html").attr("class");
            var module = $(this).attr("dt-module");
            if (currPage != module) {
                var href = contextPath + "/";
                var path = module.substr(1);
                if (module == modules[0]) {
                    path = "";
                }
                window.location.href = href + path;
            }
        });
    };

    /**
     * 启用侧边栏
     */
    var enabled = function(){
        $(".module[dt-module != '_state']").removeClass("disable");
    };

    /**
     * 禁用侧边栏
     */
    var disabled = function(){
        $(".module:not[dt-module != '_state']").addClass("disable");
    };

    /**
     * 当前访问页面设置侧边栏样式
     */
    var setActived = function () {
        var currPage = $("html").attr("class");
        var i = modules.indexOf(currPage);
        $($(".module")[i]).addClass("active");
    }
    /**
     * 当侧边栏状态为收缩时，小按钮添加hover事件
     */
    var miniModulehover = function () {
        if (isOpen) {
            $(".module").unbind("hover");
            return ;
        }
        $(".module").hover(function(ev) {
            var title = $($(this).children(".title")[0]).html();
            buddle.content(title);
            buddle.show(ev.target);
        }, function(){
            buddle.close();
        });
    };
};
module.exports=new sideBar();

},{"./_cookie":1}],6:[function(require,module,exports){
/**
 * state页面功能脚本
 * @author    姚尧 <yaogaoyu@qq.com>
 */
var state = function () {
    var contextPath = $("#p").attr("ref");
    var prompt = dialog({
        content: "<span class='col loading'>请稍候，正在获取服务器状态。</span><img class='col loading' src='"+contextPath + "/s/images/loading.gif"+"'>",
        cancel: false
    });
    var attributes;
    /**
     * 初始化state页面方法
     */
    this.perform = function (attributesParam) {
        attributes = attributesParam;
        status();
    };

    /**
     * 获取服务器状态
     */
    var status = function () {
        var statusFields = ["nodeGroupId", "databaseType", "databaseVersion", "registered", "registrationUrl", "syncUrl"];
        new Promise(function (resolve, reject) {
            // 启动模态窗口
            prompt.showModal();
            // 获取服务器状态
            $.get(contextPath + "/api/engine/status", function(data){
                if (data["started"]) {
                    // 基本信息
                    $(".operaCol .btn").removeClass("off");
                    $(".operaCol .btn").addClass("on");
                    $(".operaCol .btn .icon").removeClass("icon-play2");
                    $(".operaCol .btn .icon").addClass("icon-stop");
                    $(".splitLeft .desc").html("点击停止数据同步服务");
                    $($(".info .infoRow .desc")[0]).html("运行中");
                    $($(".info .infoRow .desc")[1]).html(data["nodeGroupId"] == "master" ? "主库节点" : "从库节点");
                    if (data["nodeGroupId"] == "master") {
                        // 获取节点数量
                        $.get(contextPath + "/api/engine/children", function(nodeData){
                            $($(".info .infoRow .title")[2]).html("从库节点数量");
                            $($(".info .infoRow .desc")[2]).html(nodeData["nodes"] ? nodeData["nodes"].length : 0);
                        }, "json");
                    }
                    // 状态信息
                    var statusRows = $(".status .statusRow");
                    for (var i = 0 ; i < statusRows.length; i++) {
                        var row = $(statusRows[i]);
                        var value = data[statusFields[i]];
                        if (statusFields[i] == "nodeGroupId")  value = value== "master" ? "主库节点" : "从库节点";
                        else if (statusFields[i] == "registered")  value = value ? "已注册" : "未注册";
                        row.children(".desc").html(value);
                    }
                    // return data;
                }
                resolve(data);
            }, "json");
        }).then(function(data){
            // 显示状态信息
            // 添加按钮事件
            if (data["started"]) {
                $(".operaCol .on").click(function(){
                    stop();
                });
            } else {
                $(".operaCol .off").click(function(){
                    start();
                });
            }
            prompt.close();
        })["catch"](function(err){
        });
    };

    var start = function () {
        prompt.content("<span class='col loading'>请稍候，服务器启动中。</span><img class='col loading' src='"+contextPath + "/s/images/loading.gif"+"'>");
        prompt.showModal();
        $.post(contextPath + "/sym/start" , null, function(){
            var startInterval = setInterval(function(){
                $.get(contextPath + "/api/engine/status", function(data){
                    if (data["started"]) {
                        clearInterval(startInterval);
                        window.location.reload();
                    }
                }, "json");
            }, 1000);

        });
    };
    var stop = function () {
        prompt.content("<span class='col loading'>请稍候，服务器停止中。</span><img class='col loading' src='"+contextPath + "/s/images/loading.gif"+"'>");
        prompt.showModal();
        $.post(contextPath + "/sym/stop" , null, function(){
            var stopInterval = setInterval(function(){
                $.get(contextPath + "/api/engine/status", function(data){
                    if (!data["started"]) {
                        clearInterval(stopInterval);
                        window.location.reload();
                    }
                }, "json");
            }, 1000);
        });
    };
    var moniteStarted = function(){

    };
};
module.exports=new state();
},{}],"www":[function(require,module,exports){
/**
 * 网站JS入口文件
 * 基于Jquery开发
 * @author    姚尧 <yaogaoyu@qq.com>
 */
var _page = $("html").attr("class");
var _scripts = {
    "_login" : require("./_login"),
    "_state" : require("./_state"),
    "_setting" : require("./_setting"),
    "_nodes" : require("./_nodes"),
    "_sideBar": require("./_sideBar")
};
var attributes = {};
_scripts["_sideBar"].perform();
if (_scripts[_page]) _scripts[_page].perform(attributes);
},{"./_login":2,"./_nodes":3,"./_setting":4,"./_sideBar":5,"./_state":6}]},{},[])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJsaWIvX2Nvb2tpZS5qcyIsImxpYi9fbG9naW4uanMiLCJsaWIvX25vZGVzLmpzIiwibGliL19zZXR0aW5nLmpzIiwibGliL19zaWRlQmFyLmpzIiwibGliL19zdGF0ZS5qcyIsImxpYi93d3cuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hZQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvKipcbiAqIGNvb2tpZeaTjeS9nOexu1xuICogQGF1dGhvciAgICDlp5rlsKcgPHlhb2dhb3l1QHFxLmNvbT5cbiAqL1xudmFyIGNvb2tpZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiDojrflj5bmjIflrppjb29pa2XjgIJcbiAgICAgKi9cbiAgICB0aGlzLmdDb29raWUgPSBmdW5jdGlvbiAobikge1xuICAgICAgICBpZiAoIW4pIHJldHVybiBudWxsO1xuICAgICAgICBpZiAoZG9jdW1lbnQuY29va2llLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciBzdGFydCA9IGRvY3VtZW50LmNvb2tpZS5pbmRleE9mKG4gKyBcIj1cIik7XG4gICAgICAgICAgICBpZiAoc3RhcnQgIT0gLTEpIHtcbiAgICAgICAgICAgICAgICBzdGFydCA9IHN0YXJ0ICsgbi5sZW5ndGggKyAxIDtcbiAgICAgICAgICAgICAgICB2YXIgZW5kID0gZG9jdW1lbnQuY29va2llLmluZGV4T2YoXCI7XCIsIHN0YXJ0KTtcbiAgICAgICAgICAgICAgICBpZiAoZW5kID09IC0xKSBlbmQgPSBkb2N1bWVudC5jb29raWUubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHJldHVybiBkb2N1bWVudC5jb29raWUuc3Vic3RyaW5nKHN0YXJ0LCBlbmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiDlhpljb29pa2XjgIJcbiAgICAgKi9cbiAgICB0aGlzLnNDb29raWUgPSBmdW5jdGlvbiAobiwgdiwgdCkge1xuICAgICAgICBpZiAoIW4gfHwgIXYpIHJldHVybjtcbiAgICAgICAgdmFyIHZhbCA9IG4gKyBcIj1cIiArIHYgKyBcIjtcIjtcbiAgICAgICAgLy9kb21haW49LmRhaGFvLmRlO1xuICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgdmFsICs9IFwiZXhwaXJlcz1cIiArIHQ7XG4gICAgICAgIH1cbiAgICAgICAgZG9jdW1lbnQuY29va2llID0gdmFsICsgXCJwYXRoPS87XCI7XG4gICAgfTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IGNvb2tpZSgpOyIsInZhciBfbG9naW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5wZXJmb3JtID0gZnVuY3Rpb24oKXtcbiAgICAgICAgY29uc29sZS5sb2coXCJsb2dpbiBwYWdlXCIpO1xuICAgIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IF9sb2dpbigpOyIsIi8qKlxuICog6IqC54K5566h55CG6aG16Z2i5Yqf6IO96ISa5pysXG4gKiBAYXV0aG9yICAgIOWnmuWwpyA8eWFvZ2FveXVAcXEuY29tPlxuICovXG52YXIgX25vZGVzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGNvbnRleHRQYXRoID0gJChcIiNwXCIpLmF0dHIoXCJyZWZcIik7XG4gICAgdmFyIGFsZXJ0RGlhbG9nID0ge1xuICAgICAgICB0aXRsZTogJ+aPkOekuicsXG4gICAgICAgIG9rVmFsdWU6ICfnoa7lrponLFxuICAgICAgICBvazogZnVuY3Rpb24oKSB7fVxuICAgIH07XG4gICAgdmFyIGNvbmZpcm1EaWFsb2cgPSB7XG4gICAgICAgIHRpdGxlOiAn6K+356Gu5a6aJyxcbiAgICAgICAgb2tWYWx1ZTogJ+ehruWumicsXG4gICAgICAgIGNhbmNlbFZhbHVlOiAn5Y+W5raIJyxcbiAgICAgICAgY2FuY2VsOiBmdW5jdGlvbigpIHt9XG4gICAgfTtcblxuICAgIHZhciBwcm9tcHQgPSBkaWFsb2coe1xuICAgICAgICBjb250ZW50OiBcIjxzcGFuIGNsYXNzPSdjb2wgbG9hZGluZyc+6K+356iN5YCZ77yM5q2j5Zyo562J5b6F5aSE55CG57uT5p6c44CCPC9zcGFuPjxpbWcgY2xhc3M9J2NvbCBsb2FkaW5nJyBzcmM9J1wiK2NvbnRleHRQYXRoICsgXCIvcy9pbWFnZXMvbG9hZGluZy5naWZcIitcIic+XCIsXG4gICAgICAgIGNhbmNlbDogZmFsc2VcbiAgICB9KTtcbiAgICAvKipcbiAgICAgKiDliJ3lp4vljJboioLngrnnrqHnkIbpobXpnaLmlrnms5VcbiAgICAgKi9cbiAgICB0aGlzLnBlcmZvcm0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIG5vZGVHcm91cCA9ICQoXCIubm9kZVBhbmVsXCIpLmF0dHIoXCJjbGFzc1wiKS5tYXRjaCgvXFxzXFxTKy8pWzBdLnJlcGxhY2UoL15cXHMrLywgXCJcIik7XG4gICAgICAgIGlmIChub2RlR3JvdXAgPT0gXCJtYXN0ZXJcIikge1xuICAgICAgICAgICAgcGVyZm9ybU1hc3RlcigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGVyZm9ybVNsYXZlcigpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIOa4hemZpOacjeWKoeerr+WSjOWuouaIt+err+eahOWFrOWFseS6i+S7tlxuICAgIHZhciBjbGVhckNvbW1vbkV2ZW50cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkKFwiLnNlbGVjdEJ0blwiKS51bmJpbmQoXCJjbGlja1wiKTtcbiAgICAgICAgJChcIi5ub2RlUm93Om5vdCguc2VydmVyTm9kZSlcIikudW5iaW5kKFwiY2xpY2tcIik7XG4gICAgfTtcblxuICAgICAvLyDmuIXpmaTmnI3liqHnq6/lkozlrqLmiLfnq6/nmoTlhazlhbHkuovku7ZcbiAgICB2YXIgYWRkQ29tbW9uRXZlbnRzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIOWFqOmAieaMiemSrua3u+WKoOeCueWHu+S6i+S7tlxuICAgICAgICAkKFwiLnNlbGVjdEJ0blwiKS5jbGljayhmdW5jdGlvbiAoZXYpIHtcbiAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAvLyBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIHRvZ2dsZVNlbGVjdEFsbCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8g6KGo5qC85Lit55qE6KGM54K55Ye75LqL5Lu2XG4gICAgICAgICQoXCIubm9kZVJvdzpub3QoLnNlcnZlck5vZGUgLmhpZGUpXCIpLmNsaWNrKGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgLy8gZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICB0b2dnbGVTZWxlY3RSb3coJCh0aGlzKSk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiDkuLvlupPoioLngrnnrqHnkIbpobXpnaLliJ3lp4vljJbmlrnms5VcbiAgICAgKi9cbiAgICB2YXIgcGVyZm9ybU1hc3RlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBhZGRDb21tb25FdmVudHMoKTtcbiAgICAgICAgLy8g5bGV5byA5oyJ6ZKuXG4gICAgICAgICQoXCIub3BlcmF0aW9uQnRuXCIpLmNsaWNrKGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICB0b2dnbGVPcGVyYUJ0bnMoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIOepuueZveWkhOWFs+mXrVxuICAgICAgICAkKGRvY3VtZW50KS5jbGljayhmdW5jdGlvbihldikge1xuICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgJChcIi5vcGVyYXRpb25GdW5jc1wiKS5hZGRDbGFzcyhcImhpZGVcIik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOazqOWGjOmAmui/h+aMiemSrueCueWHu+S6i+S7tlxuICAgICAgICAkKFwiLnBhc3NCdG5cIikuY2xpY2soZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHBhc3NSZWdpc3RyYXRpb24oKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8g5rOo5YaM5ouS57ud6YCa6L+H5oyJ6ZKu54K55Ye75LqL5Lu2XG4gICAgICAgICQoXCIucmVmdXNlQnRuXCIpLmNsaWNrKGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICByZWZ1c2VSZWdpc3RyYXRpb24oKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8g5Yig6Zmk5a2Q6IqC54K55oyJ6ZKuXG4gICAgICAgICQoXCIuZGVsTm9kZUJ0blwiKS5jbGljayhmdW5jdGlvbihldikge1xuICAgICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZGVsQ2hpbGRyZW5Ob2RlcygpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyDlrp7ml7bnm5Hmjqfms6jlhozor7fmsYJcbiAgICAgICAgbW9uaXRlUmVnaXN0ZWRSZXF1ZXN0KCk7XG4gICAgICAgIHZhciBtb25pdGUgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpe1xuICAgICAgICAgICAgbW9uaXRlUmVnaXN0ZWRSZXF1ZXN0KCk7XG4gICAgICAgIH0sIDEwMDAgKiAzMCk7XG5cbiAgICAgICAgLy8g5a6e5pe255uR5o6n5rOo5YaM6K+35rGCXG4gICAgICAgIHZhciBhdXRvUmVmcmVzaCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICByZWZyZXNoTm9kZXMoKTtcbiAgICAgICAgfSwgMTAwMCAqIDMwKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICog5LuO5bqT6IqC54K5566h55CG6aG16Z2i5Yid5aeL5YyW5pa55rOVXG4gICAgICovXG4gICAgdmFyIHBlcmZvcm1TbGF2ZXIgPSBmdW5jdGlvbigpIHtcblxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiDpgInkuK3lhajpg6gv5Y+W5raI6YCJ5Lit5oyJ6ZKu5Yqf6IO9XG4gICAgICovXG4gICAgdmFyIHRvZ2dsZVNlbGVjdEFsbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY2hlY2tib3ggPSAkKCQoXCIuc2VsZWN0QnRuXCIpLmNoaWxkcmVuKFwiLmljb25cIilbMF0pO1xuICAgICAgICB2YXIgdGV4dCA9ICQoJChcIi5zZWxlY3RCdG5cIikuY2hpbGRyZW4oXCIuYnRuTmFtZVwiKVswXSk7XG4gICAgICAgIHZhciBpc0NoZWNrZWQgPSBjaGVja2JveC5hdHRyKFwiY2xhc3NcIikubWF0Y2goL2ljb24tY2hlY2tib3gtY2hlY2tlZC8pICE9IG51bGwgJiYgY2hlY2tib3guYXR0cihcImNsYXNzXCIpLm1hdGNoKC9pY29uLWNoZWNrYm94LWNoZWNrZWQvKS5sZW5ndGggPiAwO1xuICAgICAgICBjaGVja2JveC5yZW1vdmVDbGFzcyhpc0NoZWNrZWQgPyBcImljb24tY2hlY2tib3gtY2hlY2tlZFwiIDogXCJpY29uLWNoZWNrYm94LXVuY2hlY2tlZFwiKTtcbiAgICAgICAgY2hlY2tib3guYWRkQ2xhc3MoaXNDaGVja2VkID8gXCJpY29uLWNoZWNrYm94LXVuY2hlY2tlZFwiIDogXCJpY29uLWNoZWNrYm94LWNoZWNrZWRcIik7XG4gICAgICAgIHRleHQuaHRtbChpc0NoZWNrZWQgPyBcIumAieaLqeWFqOmDqFwiIDogXCLlj5bmtojpgInmi6lcIik7XG4gICAgICAgIGlzQ2hlY2tlZCA9ICFpc0NoZWNrZWQ7XG4gICAgICAgIGlmIChpc0NoZWNrZWQpIHtcbiAgICAgICAgICAgICQoXCIubm9kZVJvdzpub3QoLnNlcnZlck5vZGUsIC5oaWRlKVwiKS5hZGRDbGFzcyhcInNlbGVjdGVkXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJChcIi5ub2RlUm93Om5vdCguc2VydmVyTm9kZSwgLmhpZGUpXCIpLnJlbW92ZUNsYXNzKFwic2VsZWN0ZWRcIik7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgIC8qKlxuICAgICAqIOmAieS4rS/lj5bmtojpgInkuK3ooYzlip/og71cbiAgICAgKi9cbiAgICB2YXIgdG9nZ2xlU2VsZWN0Um93ID0gZnVuY3Rpb24ocm93KSB7XG4gICAgICAgIHZhciBpc1NlbGVjdGVkID0gcm93LmF0dHIoXCJjbGFzc1wiKS5tYXRjaCgvc2VsZWN0ZWQvKSAhPSBudWxsICYmIHJvdy5hdHRyKFwiY2xhc3NcIikubWF0Y2goL3NlbGVjdGVkLykubGVuZ3RoID4gMDtcbiAgICAgICAgcm93LnJlbW92ZUNsYXNzKGlzU2VsZWN0ZWQgPyBcInNlbGVjdGVkXCIgOiBcIlwiKTtcbiAgICAgICAgcm93LmFkZENsYXNzKGlzU2VsZWN0ZWQgPyBcIlwiIDogXCJzZWxlY3RlZFwiKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICog5pi+56S6L+makOiXj+aTjeS9nOaMiemSrlxuICAgICAqL1xuICAgIHZhciB0b2dnbGVPcGVyYUJ0bnMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGlzU2hvdyA9ICEkKFwiLm9wZXJhdGlvbkZ1bmNzXCIpLmF0dHIoXCJjbGFzc1wiKS5tYXRjaCgvaGlkZS8pO1xuICAgICAgICAkKFwiLm9wZXJhdGlvbkZ1bmNzXCIpLnJlbW92ZUNsYXNzKGlzU2hvdyA/IFwiXCIgOiBcImhpZGVcIik7XG4gICAgICAgICQoXCIub3BlcmF0aW9uRnVuY3NcIikuYWRkQ2xhc3MoaXNTaG93ID8gXCJoaWRlXCIgOiBcIlwiKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICog5rOo5YaM6YCa6L+H5oyJ6ZKu54K55Ye75LqL5Lu2XG4gICAgICovXG4gICAgdmFyIHBhc3NSZWdpc3RyYXRpb24gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHNlbGVjdGVkVW5yZWdpc3RlZCA9IGdldFNlbGVjdGVkVW5yZWdpc3RlZEV4aWQoKTtcbiAgICAgICAgaWYgKHNlbGVjdGVkVW5yZWdpc3RlZC5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgdmFyIHBvcHVwID0gZGlhbG9nKGFsZXJ0RGlhbG9nKTtcbiAgICAgICAgICAgIHBvcHVwLmNvbnRlbnQoXCI8c3BhbiBjbGFzcz0nYWxlcnQnPjxzcGFuIGNsYXNzPSdpY29uIGljb24tbm90aWZpY2F0aW9uJz48L3NwYW4+PHNwYW4gY2xhc3M9J3RpdGxlJz7or7foh7PlsJHpgInmi6nkuIDkuKrmnKrms6jlhoznmoTku47lupPoioLngrnjgII8L3NwYW4+XCIpO1xuICAgICAgICAgICAgcG9wdXAuc2hvd01vZGFsKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyDlj5blvpfooqvpgInkuK3nmoTku47lupPoioLngrnmlbDmja5cbiAgICAgICAgbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgLy8g5by55Ye656qX5Y+j56Gu5a6aXG4gICAgICAgICAgICBjb25maXJtRGlhbG9nLm9rID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGNvbmZpcm0uY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBwcm9tcHQuc2hvd01vZGFsKCk7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uZmlybURpYWxvZy5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgY29uZmlybS5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIHJlamVjdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNvbmZpcm0gPSBkaWFsb2coY29uZmlybURpYWxvZyk7XG4gICAgICAgICAgICBjb25maXJtLmNvbnRlbnQoXCI8c3BhbiBjbGFzcz0nY29uZmlybSc+PHNwYW4gY2xhc3M9J2ljb24gaWNvbi1xdWVzdGlvbic+PC9zcGFuPjxzcGFuIGNsYXNzPSd0aXRsZSc+5oKo6YCJ5Lit5LqGXCIrc2VsZWN0ZWRVbnJlZ2lzdGVkLmxlbmd0aCtcIuS4quacquazqOWGjOeahOS7juW6k+iKgueCue+8jOehruWumuWwhui/meS6m+S7juW6k+iKgueCuemAmui/h+azqOWGjOWQl++8nzwvc3Bhbj5cIik7XG4gICAgICAgICAgICBjb25maXJtLnNob3dNb2RhbCgpO1xuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgICAgICAgICAkLnBvc3QoY29udGV4dFBhdGggKyBcIi9ub2Rlcy9hbGxvd1wiLCB7XCJub2Rlc1wiOiBzZWxlY3RlZFVucmVnaXN0ZWR9LCBmdW5jdGlvbihyZXNwRGF0YSkge1xuICAgICAgICAgICAgICAgIGlmIChyZXNwRGF0YVtcImNvZGVcIl0gPT0gXCIxXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvbXB0LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwcm9tcHQuY29udGVudChcIjxzcGFuIGNsYXNzPSdjb2wgbG9hZGluZyc+XCIrcmVzcERhdGFbJ21zZyddK1wiPC9zcGFuPjxpbWcgY2xhc3M9J2NvbCBsb2FkaW5nJyBzcmM9J1wiK2NvbnRleHRQYXRoICsgXCIvcy9pbWFnZXMvbG9hZGluZy5naWYnPlwiKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbXB0LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sIDIwMDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIFwianNvblwiKTtcbiAgICAgICAgfSlbXCJjYXRjaFwiXShmdW5jdGlvbigpe30pO1xuXG4gICAgICAgIHRvZ2dsZU9wZXJhQnRucygpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiDms6jlhozmi5Lnu53pgJrov4fmjInpkq7ngrnlh7vkuovku7ZcbiAgICAgKi9cbiAgICB2YXIgcmVmdXNlUmVnaXN0cmF0aW9uID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBzZWxlY3RlZFVucmVnaXN0ZWQgPSBnZXRTZWxlY3RlZFVucmVnaXN0ZWRFeGlkKCk7XG4gICAgICAgIGlmIChzZWxlY3RlZFVucmVnaXN0ZWQubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIHZhciBwb3B1cCA9IGRpYWxvZyhhbGVydERpYWxvZyk7XG4gICAgICAgICAgICBwb3B1cC5jb250ZW50KFwiPHNwYW4gY2xhc3M9J2FsZXJ0Jz48c3BhbiBjbGFzcz0naWNvbiBpY29uLW5vdGlmaWNhdGlvbic+PC9zcGFuPjxzcGFuIGNsYXNzPSd0aXRsZSc+6K+36Iez5bCR6YCJ5oup5LiA5Liq5pyq5rOo5YaM55qE5LuO5bqT6IqC54K544CCPC9zcGFuPlwiKTtcbiAgICAgICAgICAgIHBvcHVwLnNob3dNb2RhbCgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8g5Y+W5b6X6KKr6YCJ5Lit55qE5LuO5bqT6IqC54K55pWw5o2uXG4gICAgICAgIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIC8vIOW8ueWHuueql+WPo+ehruWumlxuICAgICAgICAgICAgY29uZmlybURpYWxvZy5vayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjb25maXJtLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgcHJvbXB0LnNob3dNb2RhbCgpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbmZpcm1EaWFsb2cuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGNvbmZpcm0uY2xvc2UoKTtcbiAgICAgICAgICAgICAgICByZWplY3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjb25maXJtID0gZGlhbG9nKGNvbmZpcm1EaWFsb2cpO1xuICAgICAgICAgICAgY29uZmlybS5jb250ZW50KFwiPHNwYW4gY2xhc3M9J2NvbmZpcm0nPjxzcGFuIGNsYXNzPSdpY29uIGljb24tcXVlc3Rpb24nPjwvc3Bhbj48c3BhbiBjbGFzcz0ndGl0bGUnPuaCqOmAieS4reS6hlwiK3NlbGVjdGVkVW5yZWdpc3RlZC5sZW5ndGgrXCLkuKrmnKrms6jlhoznmoTku47lupPoioLngrnvvIznoa7lrprmi5Lnu53ov5nkupvku47lupPoioLngrnnmoTms6jlhozor7fmsYLlkJfvvJ88L3NwYW4+XCIpO1xuICAgICAgICAgICAgY29uZmlybS5zaG93TW9kYWwoKTtcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgICAgICAgICAgJC5wb3N0KGNvbnRleHRQYXRoICsgXCIvbm9kZXMvcmVmdXNlXCIsIHtcIm5vZGVzXCI6IHNlbGVjdGVkVW5yZWdpc3RlZH0sIGZ1bmN0aW9uKHJlc3BEYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3BEYXRhW1wiY29kZVwiXSA9PSBcIjFcIikge1xuICAgICAgICAgICAgICAgICAgICBwcm9tcHQuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHByb21wdC5jb250ZW50KFwiPHNwYW4gY2xhc3M9J2NvbCBsb2FkaW5nJz5cIityZXNwRGF0YVsnbXNnJ10rXCI8L3NwYW4+PGltZyBjbGFzcz0nY29sIGxvYWRpbmcnIHNyYz0nXCIrY29udGV4dFBhdGggKyBcIi9zL2ltYWdlcy9sb2FkaW5nLmdpZic+XCIpO1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9tcHQuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgMjAwMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgXCJqc29uXCIpO1xuICAgICAgICB9KVtcImNhdGNoXCJdKGZ1bmN0aW9uKCl7fSk7XG5cbiAgICAgICAgdG9nZ2xlT3BlcmFCdG5zKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIOWIoOmZpOS7juW6k+iKgueCueaMiemSrlxuICAgICAqL1xuICAgIHZhciBkZWxDaGlsZHJlbk5vZGVzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIOWPluW+l+iiq+mAieS4reeahOS7juW6k+iKgueCueaVsOaNrlxuICAgICAgICB2YXIgc2VsZWN0ZWRSZWdpc3RlZCA9IGdldFNlbGVjdGVkUmVnaXN0ZWRFeGlkKCk7XG4gICAgICAgIGlmIChzZWxlY3RlZFJlZ2lzdGVkLmxlbmd0aCAhPSAxKSB7XG4gICAgICAgICAgICB2YXIgcG9wdXAgPSBkaWFsb2coYWxlcnREaWFsb2cpO1xuICAgICAgICAgICAgcG9wdXAuY29udGVudChcIjxzcGFuIGNsYXNzPSdhbGVydCc+PHNwYW4gY2xhc3M9J2ljb24gaWNvbi1ub3RpZmljYXRpb24nPjwvc3Bhbj48c3BhbiBjbGFzcz0ndGl0bGUnPuWPquiDvemAieaLqeS4gOS4quW3suazqOWGjOeahOS7juW6k+iKgueCuei/m+ihjOenu+mZpOOAgjwvc3Bhbj5cIik7XG4gICAgICAgICAgICBwb3B1cC5zaG93TW9kYWwoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIC8vIOW8ueWHuueql+WPo+ehruWumlxuICAgICAgICAgICAgY29uZmlybURpYWxvZy5vayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjb25maXJtLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgcHJvbXB0LnNob3dNb2RhbCgpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbmZpcm1EaWFsb2cuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGNvbmZpcm0uY2xvc2UoKTtcbiAgICAgICAgICAgICAgICByZWplY3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjb25maXJtID0gZGlhbG9nKGNvbmZpcm1EaWFsb2cpO1xuICAgICAgICAgICAgY29uZmlybS5jb250ZW50KFwiPHNwYW4gY2xhc3M9J2NvbmZpcm0nPjxzcGFuIGNsYXNzPSdpY29uIGljb24tcXVlc3Rpb24nPjwvc3Bhbj48c3BhbiBjbGFzcz0ndGl0bGUnPuehruWumuW9u+W6leenu+mZpOmAieS4reeahOS7juW6k+iKgueCueWQl++8nzwvc3Bhbj5cIik7XG4gICAgICAgICAgICBjb25maXJtLnNob3dNb2RhbCgpO1xuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgICAgICAgICB2YXIgZXggPSBzZWxlY3RlZFJlZ2lzdGVkWzBdO1xuICAgICAgICAgICAgJC5wb3N0KGNvbnRleHRQYXRoICsgXCIvYXBpL2VuZ2luZS9yZW1vdmVub2RlXCIsIHtcIm5vZGVJZFwiOiBleH0sIGZ1bmN0aW9uKHJlc3BEYXRhKSB7XG4gICAgICAgICAgICAgICAgcHJvbXB0LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICAgICAgfSwgXCJqc29uXCIpO1xuICAgICAgICB9KVtcImNhdGNoXCJdKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBwcm9tcHQuY2xvc2UoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdG9nZ2xlT3BlcmFCdG5zKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIOaYr+WQpuaciemAieS4reaVsOaNrlxuICAgICAqL1xuICAgIHZhciB2YWxpZGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gJChcIi5zZWxlY3RlZFwiKS5sZW5ndGggPiAwO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiDojrflj5bmiYDmnInooqvpgInkuK3mnKrms6jlhoznmoTku47lupPoioLngrlJRFxuICAgICAqL1xuICAgIHZhciBnZXRTZWxlY3RlZFVucmVnaXN0ZWRFeGlkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBzZWxlY3RlZFJvd3MgPSAkKFwiLnNlbGVjdGVkIC5leFwiKTtcbiAgICAgICAgdmFyIGV4aWRBcnIgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaiA9IDAgOyBqIDwgc2VsZWN0ZWRSb3dzLmxlbmd0aCA7IGorKykge1xuICAgICAgICAgICAgdmFyIG5vZGVJbmZvID0gJChzZWxlY3RlZFJvd3Nbal0pLmh0bWwoKTtcbiAgICAgICAgICAgIHZhciBleGlkID0gbm9kZUluZm8uc3BsaXQoXCIsXCIpWzBdO1xuICAgICAgICAgICAgdmFyIGlzUmVnaXN0ZWQgPSBub2RlSW5mby5zcGxpdChcIixcIilbMV0gPT0gXCJ0cnVlXCI7XG4gICAgICAgICAgICBpZiAoIWlzUmVnaXN0ZWQpIGV4aWRBcnIucHVzaChleGlkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZXhpZEFycjtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICog6I635Y+W5omA5pyJ6KKr6YCJ5Lit5bey5rOo5YaM55qE5LuO5bqT6IqC54K5SURcbiAgICAgKi9cbiAgICB2YXIgZ2V0U2VsZWN0ZWRSZWdpc3RlZEV4aWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHNlbGVjdGVkUm93cyA9ICQoXCIuc2VsZWN0ZWQgLmV4XCIpO1xuICAgICAgICB2YXIgZXhpZEFyciA9IFtdO1xuICAgICAgICBmb3IgKHZhciBqID0gMCA7IGogPCBzZWxlY3RlZFJvd3MubGVuZ3RoIDsgaisrKSB7XG4gICAgICAgICAgICB2YXIgbm9kZUluZm8gPSAkKHNlbGVjdGVkUm93c1tqXSkuaHRtbCgpO1xuICAgICAgICAgICAgdmFyIGV4aWQgPSBub2RlSW5mby5zcGxpdChcIixcIilbMF07XG4gICAgICAgICAgICB2YXIgaXNSZWdpc3RlZCA9IG5vZGVJbmZvLnNwbGl0KFwiLFwiKVsxXSA9PSBcInRydWVcIjtcbiAgICAgICAgICAgIGlmIChpc1JlZ2lzdGVkKSBleGlkQXJyLnB1c2goZXhpZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV4aWRBcnI7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIOiOt+WPluaJgOacieacquazqOWGjOeahOS7juW6k+iKgueCuUlEXG4gICAgICovXG4gICAgdmFyIGdldEFsbGRVbnJlZ2lzdGVkRXhpZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY2hpbGRFeGlkcyA9ICQoXCIuY2hpbGROb2RlOm5vdCguaGlkZSkgLmV4XCIpO1xuICAgICAgICB2YXIgZXhpZEFyciA9IFtdO1xuICAgICAgICBmb3IgKHZhciBqID0gMCA7IGogPCBjaGlsZEV4aWRzLmxlbmd0aCA7IGorKykge1xuICAgICAgICAgICAgdmFyIG5vZGVJbmZvID0gJChjaGlsZEV4aWRzW2pdKS5odG1sKCk7XG4gICAgICAgICAgICB2YXIgZXhpZCA9IG5vZGVJbmZvLnNwbGl0KFwiLFwiKVswXTtcbiAgICAgICAgICAgIHZhciBpc1JlZ2lzdGVkID0gbm9kZUluZm8uc3BsaXQoXCIsXCIpWzFdID09IFwidHJ1ZVwiO1xuICAgICAgICAgICAgaWYgKCFpc1JlZ2lzdGVkKSBleGlkQXJyLnB1c2goZXhpZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV4aWRBcnI7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIOWIt+aWsOiKgueCueWIl+ihqFxuICAgICAqL1xuICAgIHZhciByZWZyZXNoTm9kZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJC5wb3N0KGNvbnRleHRQYXRoICsgXCIvbm9kZXMvcmVmcmVzaFwiLCBudWxsLCBmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgIHZhciBsaXN0ID0gZGF0YVtcImRhdGFcIl07XG4gICAgICAgICAgICB2YXIgdGVtcGxhdGUgPSAkKFwiLm5vZGVSb3cuY2hpbGROb2RlLmhpZGVcIik7XG4gICAgICAgICAgICBpZiAobGlzdC5sZW5ndGggPiAwICkge1xuICAgICAgICAgICAgICAgICQoXCIuY2hpbGROb2RlOm5vdCguaGlkZSk6bm90KC5yZXFSZWcpXCIpLmRldGFjaCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICh2YXIgeCA9IDAgOyB4IDwgbGlzdC5sZW5ndGggOyB4KyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcm93RGF0YSA9IGxpc3RbeF07XG4gICAgICAgICAgICAgICAgaWYgKHJvd0RhdGFbXCJncm91cFwiXSA9PSBcIm1hc3RlclwiKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB2YXIgcm93ID0gdGVtcGxhdGUuY2xvbmUoKTtcbiAgICAgICAgICAgICAgICB2YXIgY29sID0gcm93LmNoaWxkcmVuKFwic3BhblwiKTtcbiAgICAgICAgICAgICAgICAkKGNvbFswXSkuaHRtbChyb3dEYXRhW1wiZXh0ZXJuYWxJZFwiXStcIixcIityb3dEYXRhW1wiaXNSZWdpc3RyYXRpb25cIl0pO1xuICAgICAgICAgICAgICAgICQoJChjb2xbMV0pLmNoaWxkcmVuKFwic3BhblwiKVsxXSkuaHRtbChyb3dEYXRhW1wiZXh0ZXJuYWxJZFwiXSk7XG4gICAgICAgICAgICAgICAgJChjb2xbMl0pLmh0bWwocm93RGF0YVtcImdyb3VwXCJdID09IFwibWFzdGVyXCIgPyBcIuS4u+W6k1wiIDogXCLku47lupNcIik7XG4gICAgICAgICAgICAgICAgJChjb2xbM10pLmh0bWwocm93RGF0YVtcImlzUmVnaXN0cmF0aW9uXCJdID8gXCLlt7Lms6jlhoxcIiA6IFwi5pyq5rOo5YaMXCIpO1xuICAgICAgICAgICAgICAgICQoY29sWzRdKS5odG1sKHJvd0RhdGFbXCJsYXN0SGVhcnRiZWF0c1wiXSk7XG4gICAgICAgICAgICAgICAgJChjb2xbNV0pLmh0bWwocm93RGF0YVtcInN5bmNVcmxcIl0pO1xuICAgICAgICAgICAgICAgICQoY29sWzZdKS5odG1sKHJvd0RhdGFbXCJkYXRhYmFzZVwiXSk7XG4gICAgICAgICAgICAgICAgJChjb2xbN10pLmh0bWwocm93RGF0YVtcImRiVmVyc2lvblwiXSk7XG4gICAgICAgICAgICAgICAgcm93LnJlbW92ZUNsYXNzKFwiaGlkZVwiKTtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZS5iZWZvcmUocm93KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsZWFyQ29tbW9uRXZlbnRzKCk7XG4gICAgICAgICAgICBhZGRDb21tb25FdmVudHMoKTtcbiAgICAgICAgfSwgXCJqc29uXCIpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiDnm5Hop4bms6jlhozor7fmsYJcbiAgICAgKi9cbiAgICB2YXIgbW9uaXRlUmVnaXN0ZWRSZXF1ZXN0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB1bnJlZ2lzdGVkRXhpZCA9IGdldEFsbGRVbnJlZ2lzdGVkRXhpZCgpO1xuICAgICAgICAkLnBvc3QoY29udGV4dFBhdGggKyBcIi9ub2Rlcy91bnJlZ2lzdHJhdGlvblwiLCBudWxsLCBmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgIHZhciBsaXN0ID0gZGF0YVtcImRhdGFcIl07XG4gICAgICAgICAgICB2YXIgdGVtcGxhdGUgPSAkKFwiLm5vZGVSb3cuY2hpbGROb2RlLmhpZGVcIik7XG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gMCA7IHggPCBsaXN0Lmxlbmd0aCA7IHgrKykge1xuICAgICAgICAgICAgICAgIHZhciByb3dEYXRhID0gbGlzdFt4XTtcbiAgICAgICAgICAgICAgICBpZiAodW5yZWdpc3RlZEV4aWQuaW5kZXhPZihyb3dEYXRhW1wiZXh0ZXJuYWxJZFwiXSkgPiAtMSkgY29udGludWU7XG4gICAgICAgICAgICAgICAgdmFyIHJvdyA9IHRlbXBsYXRlLmNsb25lKCk7XG4gICAgICAgICAgICAgICAgdmFyIGNvbCA9IHJvdy5jaGlsZHJlbihcInNwYW5cIik7XG4gICAgICAgICAgICAgICAgJChjb2xbMF0pLmh0bWwocm93RGF0YVtcImV4dGVybmFsSWRcIl0rXCIsZmFsc2VcIik7XG4gICAgICAgICAgICAgICAgJCgkKGNvbFsxXSkuY2hpbGRyZW4oXCJzcGFuXCIpWzFdKS5odG1sKHJvd0RhdGFbXCJleHRlcm5hbElkXCJdKTtcbiAgICAgICAgICAgICAgICAkKGNvbFsyXSkuaHRtbChyb3dEYXRhW1wibm9kZUdyb3VwSWRcIl0gPT0gXCJtYXN0ZXJcIiA/IFwi5Li75bqTXCIgOiBcIuS7juW6k1wiKTtcbiAgICAgICAgICAgICAgICAkKGNvbFszXSkuaHRtbChcIuacquazqOWGjFwiKTtcbiAgICAgICAgICAgICAgICAkKGNvbFs0XSkuaHRtbChcIj9cIik7XG4gICAgICAgICAgICAgICAgJChjb2xbNV0pLmh0bWwoXCI/XCIpO1xuICAgICAgICAgICAgICAgICQoY29sWzZdKS5odG1sKFwiP1wiKTtcbiAgICAgICAgICAgICAgICAkKGNvbFs3XSkuaHRtbChcIj9cIik7XG4gICAgICAgICAgICAgICAgcm93LmFkZENsYXNzKFwicmVxUmVnXCIpO1xuICAgICAgICAgICAgICAgIHJvdy5yZW1vdmVDbGFzcyhcImhpZGVcIik7XG4gICAgICAgICAgICAgICAgJChcIi5saXN0SGVhZGVyXCIpLmFmdGVyKHJvdyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjbGVhckNvbW1vbkV2ZW50cygpO1xuICAgICAgICAgICAgYWRkQ29tbW9uRXZlbnRzKCk7XG4gICAgICAgIH0sIFwianNvblwiKTtcbiAgICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBfbm9kZXMoKTsiLCJ2YXIgX3NldHRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgLyoqXG4gICAgICog5Yid5aeL5YyWc2V0dGluZ+mhtemdouaWueazlVxuICAgICAqL1xuICAgIHRoaXMucGVyZm9ybSA9IGZ1bmN0aW9uIChhdHRyaWJ1dGVzUGFyYW0pe307XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IG5ldyBfc2V0dGluZygpOyIsIi8qKlxuICog5L6n6L655qCP5Yqf6IO96ISa5pysXG4gKiBAYXV0aG9yICAgIOWnmuWwpyA8eWFvZ2FveXVAcXEuY29tPlxuICovXG52YXIgc2lkZUJhciA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY29udGV4dFBhdGggPSAkKFwiI3BcIikuYXR0cihcInJlZlwiKTtcbiAgICB2YXIgY29va2llID0gcmVxdWlyZShcIi4vX2Nvb2tpZVwiKTtcbiAgICB2YXIgaXNPcGVuID0gY29va2llLmdDb29raWUoXCJzaWRlQmFyLm9wZW5cIikgPyBjb29raWUuZ0Nvb2tpZShcInNpZGVCYXIub3BlblwiKSA9PSBcInRydWVcIiA/IHRydWUgOiBmYWxzZSA6IHRydWU7XG4gICAgLy8g5oyJ5pi+56S66aG65bqP6K6+572u5qih5Z2XLCDmjInorr/pl67ov57mjqXlj5blkI1cbiAgICB2YXIgbW9kdWxlcyA9IFtcIl9zdGF0ZVwiLCBcIl9ub2Rlc1wiLCBcIl9zZXR0aW5nXCJdO1xuICAgIHZhciBidWRkbGUgPSBkaWFsb2coe1xuICAgICAgICBhbGlnbjogJ3JpZ2h0J1xuICAgIH0pO1xuICAgIC8qKlxuICAgICAqIOWIneWni+WMluS+p+i+ueagj+aWueazlVxuICAgICAqL1xuICAgIHRoaXMucGVyZm9ybSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8g6K6+572u5L6n6L655qCP6buY6K6k5omT5byA54q25oCBXG4gICAgICAgIGlmICghaXNPcGVuKSB7XG4gICAgICAgICAgICAkKFwiLnNpZGVCYXJcIikucmVtb3ZlQ2xhc3MoaXNPcGVuID8gXCJtaW5pXCIgOiBcImZ1bGxcIik7XG4gICAgICAgICAgICAkKFwiLnNpZGVCYXJcIikuYWRkQ2xhc3MoaXNPcGVuID8gXCJmdWxsXCIgOiBcIm1pbmlcIik7XG4gICAgICAgICAgICAkKFwiLmNlbnRlckZyYW1lXCIpLnJlbW92ZUNsYXNzKGlzT3BlbiA/IFwibWluaVNpZGVCYXJcIiA6IFwiZnVsbFNpZGVCYXJcIik7XG4gICAgICAgICAgICAkKFwiLmNlbnRlckZyYW1lXCIpLmFkZENsYXNzKGlzT3BlbiA/IFwiZnVsbFNpZGVCYXJcIiA6IFwibWluaVNpZGVCYXJcIik7XG4gICAgICAgICAgICAkKFwiLmluZGVudCAuaWNvblwiKS5yZW1vdmVDbGFzcyhpc09wZW4gPyBcImljb24taW5kZW50LWluY3JlYXNlXCIgOiBcImljb24taW5kZW50LWRlY3JlYXNlXCIpO1xuICAgICAgICAgICAgJChcIi5pbmRlbnQgLmljb25cIikuYWRkQ2xhc3MoaXNPcGVuID8gXCJpY29uLWluZGVudC1kZWNyZWFzZVwiIDogXCJpY29uLWluZGVudC1pbmNyZWFzZVwiKTtcbiAgICAgICAgICAgIG1pbmlNb2R1bGVob3ZlcigpO1xuICAgICAgICB9XG4gICAgICAgIC8vIOiuvue9rum7mOiupOmAieS4reaooeWdl1xuICAgICAgICBzZXRBY3RpdmVkKCk7XG4gICAgICAgIC8vIOa3u+WKoOS+p+i+ueagj+e8qeaUvuS6i+S7tlxuICAgICAgICAkKFwiLmluZGVudFwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpc09wZW4gPSAhaXNPcGVuO1xuICAgICAgICAgICAgJChcIi5zaWRlQmFyXCIpLnJlbW92ZUNsYXNzKGlzT3BlbiA/IFwibWluaVwiIDogXCJmdWxsXCIpO1xuICAgICAgICAgICAgJChcIi5zaWRlQmFyXCIpLmFkZENsYXNzKGlzT3BlbiA/IFwiZnVsbFwiIDogXCJtaW5pXCIpO1xuICAgICAgICAgICAgJChcIi5jZW50ZXJGcmFtZVwiKS5yZW1vdmVDbGFzcyhpc09wZW4gPyBcIm1pbmlTaWRlQmFyXCIgOiBcImZ1bGxTaWRlQmFyXCIpO1xuICAgICAgICAgICAgJChcIi5jZW50ZXJGcmFtZVwiKS5hZGRDbGFzcyhpc09wZW4gPyBcImZ1bGxTaWRlQmFyXCIgOiBcIm1pbmlTaWRlQmFyXCIpO1xuICAgICAgICAgICAgJChcIi5pbmRlbnQgLmljb25cIikucmVtb3ZlQ2xhc3MoaXNPcGVuID8gXCJpY29uLWluZGVudC1pbmNyZWFzZVwiIDogXCJpY29uLWluZGVudC1kZWNyZWFzZVwiKTtcbiAgICAgICAgICAgICQoXCIuaW5kZW50IC5pY29uXCIpLmFkZENsYXNzKGlzT3BlbiA/IFwiaWNvbi1pbmRlbnQtZGVjcmVhc2VcIiA6IFwiaWNvbi1pbmRlbnQtaW5jcmVhc2VcIik7XG4gICAgICAgICAgICAvLyDkvqfovrnmoI/nirbmgIHlhpnlhaVjb29raWVcbiAgICAgICAgICAgIGNvb2tpZS5zQ29va2llKFwic2lkZUJhci5vcGVuXCIsIGlzT3BlbiArIFwiXCIpO1xuICAgICAgICAgICAgLy8g5re75Yqg5L6n6L655qCP5qih5Z2XaG92ZXLmoLflvI9cbiAgICAgICAgICAgIG1pbmlNb2R1bGVob3ZlcigpO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8g6K6+572u5L6n6L655qCP5piv5ZCm5ZCv55SoXG4gICAgICAgIHZhciBpc0VuZ2luZVN0YXJ0ZWQgPSAkKFwiLm1vZHVsZXNcIikuYXR0cihcImNsYXNzXCIpLm1hdGNoKC9cXHNzdGFydGVkJC8pO1xuICAgICAgICBpZiAoaXNFbmdpbmVTdGFydGVkKSB7XG4gICAgICAgICAgICBlbmFibGVkKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy/mt7vliqDmqKHlnZfngrnlh7vkuovku7ZcbiAgICAgICAgJChcIi5tb2R1bGVcIikuY2xpY2soZnVuY3Rpb24oZXYpIHtcbiAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB2YXIgaXNEaXNhYmxlZCA9ICQodGhpcykuYXR0cihcImNsYXNzXCIpLm1hdGNoKC9cXHNkaXNhYmxlJC8pO1xuICAgICAgICAgICAgaWYgKGlzRGlzYWJsZWQpIHJldHVybjtcbiAgICAgICAgICAgIHZhciBjdXJyUGFnZSA9ICQoXCJodG1sXCIpLmF0dHIoXCJjbGFzc1wiKTtcbiAgICAgICAgICAgIHZhciBtb2R1bGUgPSAkKHRoaXMpLmF0dHIoXCJkdC1tb2R1bGVcIik7XG4gICAgICAgICAgICBpZiAoY3VyclBhZ2UgIT0gbW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGhyZWYgPSBjb250ZXh0UGF0aCArIFwiL1wiO1xuICAgICAgICAgICAgICAgIHZhciBwYXRoID0gbW9kdWxlLnN1YnN0cigxKTtcbiAgICAgICAgICAgICAgICBpZiAobW9kdWxlID09IG1vZHVsZXNbMF0pIHtcbiAgICAgICAgICAgICAgICAgICAgcGF0aCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gaHJlZiArIHBhdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiDlkK/nlKjkvqfovrnmoI9cbiAgICAgKi9cbiAgICB2YXIgZW5hYmxlZCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICQoXCIubW9kdWxlW2R0LW1vZHVsZSAhPSAnX3N0YXRlJ11cIikucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlXCIpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiDnpoHnlKjkvqfovrnmoI9cbiAgICAgKi9cbiAgICB2YXIgZGlzYWJsZWQgPSBmdW5jdGlvbigpe1xuICAgICAgICAkKFwiLm1vZHVsZTpub3RbZHQtbW9kdWxlICE9ICdfc3RhdGUnXVwiKS5hZGRDbGFzcyhcImRpc2FibGVcIik7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIOW9k+WJjeiuv+mXrumhtemdouiuvue9ruS+p+i+ueagj+agt+W8j1xuICAgICAqL1xuICAgIHZhciBzZXRBY3RpdmVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY3VyclBhZ2UgPSAkKFwiaHRtbFwiKS5hdHRyKFwiY2xhc3NcIik7XG4gICAgICAgIHZhciBpID0gbW9kdWxlcy5pbmRleE9mKGN1cnJQYWdlKTtcbiAgICAgICAgJCgkKFwiLm1vZHVsZVwiKVtpXSkuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIOW9k+S+p+i+ueagj+eKtuaAgeS4uuaUtue8qeaXtu+8jOWwj+aMiemSrua3u+WKoGhvdmVy5LqL5Lu2XG4gICAgICovXG4gICAgdmFyIG1pbmlNb2R1bGVob3ZlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKGlzT3Blbikge1xuICAgICAgICAgICAgJChcIi5tb2R1bGVcIikudW5iaW5kKFwiaG92ZXJcIik7XG4gICAgICAgICAgICByZXR1cm4gO1xuICAgICAgICB9XG4gICAgICAgICQoXCIubW9kdWxlXCIpLmhvdmVyKGZ1bmN0aW9uKGV2KSB7XG4gICAgICAgICAgICB2YXIgdGl0bGUgPSAkKCQodGhpcykuY2hpbGRyZW4oXCIudGl0bGVcIilbMF0pLmh0bWwoKTtcbiAgICAgICAgICAgIGJ1ZGRsZS5jb250ZW50KHRpdGxlKTtcbiAgICAgICAgICAgIGJ1ZGRsZS5zaG93KGV2LnRhcmdldCk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBidWRkbGUuY2xvc2UoKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbn07XG5tb2R1bGUuZXhwb3J0cz1uZXcgc2lkZUJhcigpO1xuIiwiLyoqXG4gKiBzdGF0ZemhtemdouWKn+iDveiEmuacrFxuICogQGF1dGhvciAgICDlp5rlsKcgPHlhb2dhb3l1QHFxLmNvbT5cbiAqL1xudmFyIHN0YXRlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBjb250ZXh0UGF0aCA9ICQoXCIjcFwiKS5hdHRyKFwicmVmXCIpO1xuICAgIHZhciBwcm9tcHQgPSBkaWFsb2coe1xuICAgICAgICBjb250ZW50OiBcIjxzcGFuIGNsYXNzPSdjb2wgbG9hZGluZyc+6K+356iN5YCZ77yM5q2j5Zyo6I635Y+W5pyN5Yqh5Zmo54q25oCB44CCPC9zcGFuPjxpbWcgY2xhc3M9J2NvbCBsb2FkaW5nJyBzcmM9J1wiK2NvbnRleHRQYXRoICsgXCIvcy9pbWFnZXMvbG9hZGluZy5naWZcIitcIic+XCIsXG4gICAgICAgIGNhbmNlbDogZmFsc2VcbiAgICB9KTtcbiAgICB2YXIgYXR0cmlidXRlcztcbiAgICAvKipcbiAgICAgKiDliJ3lp4vljJZzdGF0ZemhtemdouaWueazlVxuICAgICAqL1xuICAgIHRoaXMucGVyZm9ybSA9IGZ1bmN0aW9uIChhdHRyaWJ1dGVzUGFyYW0pIHtcbiAgICAgICAgYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXNQYXJhbTtcbiAgICAgICAgc3RhdHVzKCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIOiOt+WPluacjeWKoeWZqOeKtuaAgVxuICAgICAqL1xuICAgIHZhciBzdGF0dXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzdGF0dXNGaWVsZHMgPSBbXCJub2RlR3JvdXBJZFwiLCBcImRhdGFiYXNlVHlwZVwiLCBcImRhdGFiYXNlVmVyc2lvblwiLCBcInJlZ2lzdGVyZWRcIiwgXCJyZWdpc3RyYXRpb25VcmxcIiwgXCJzeW5jVXJsXCJdO1xuICAgICAgICBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAvLyDlkK/liqjmqKHmgIHnqpflj6NcbiAgICAgICAgICAgIHByb21wdC5zaG93TW9kYWwoKTtcbiAgICAgICAgICAgIC8vIOiOt+WPluacjeWKoeWZqOeKtuaAgVxuICAgICAgICAgICAgJC5nZXQoY29udGV4dFBhdGggKyBcIi9hcGkvZW5naW5lL3N0YXR1c1wiLCBmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YVtcInN0YXJ0ZWRcIl0pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8g5Z+65pys5L+h5oGvXG4gICAgICAgICAgICAgICAgICAgICQoXCIub3BlcmFDb2wgLmJ0blwiKS5yZW1vdmVDbGFzcyhcIm9mZlwiKTtcbiAgICAgICAgICAgICAgICAgICAgJChcIi5vcGVyYUNvbCAuYnRuXCIpLmFkZENsYXNzKFwib25cIik7XG4gICAgICAgICAgICAgICAgICAgICQoXCIub3BlcmFDb2wgLmJ0biAuaWNvblwiKS5yZW1vdmVDbGFzcyhcImljb24tcGxheTJcIik7XG4gICAgICAgICAgICAgICAgICAgICQoXCIub3BlcmFDb2wgLmJ0biAuaWNvblwiKS5hZGRDbGFzcyhcImljb24tc3RvcFwiKTtcbiAgICAgICAgICAgICAgICAgICAgJChcIi5zcGxpdExlZnQgLmRlc2NcIikuaHRtbChcIueCueWHu+WBnOatouaVsOaNruWQjOatpeacjeWKoVwiKTtcbiAgICAgICAgICAgICAgICAgICAgJCgkKFwiLmluZm8gLmluZm9Sb3cgLmRlc2NcIilbMF0pLmh0bWwoXCLov5DooYzkuK1cIik7XG4gICAgICAgICAgICAgICAgICAgICQoJChcIi5pbmZvIC5pbmZvUm93IC5kZXNjXCIpWzFdKS5odG1sKGRhdGFbXCJub2RlR3JvdXBJZFwiXSA9PSBcIm1hc3RlclwiID8gXCLkuLvlupPoioLngrlcIiA6IFwi5LuO5bqT6IqC54K5XCIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YVtcIm5vZGVHcm91cElkXCJdID09IFwibWFzdGVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOiOt+WPluiKgueCueaVsOmHj1xuICAgICAgICAgICAgICAgICAgICAgICAgJC5nZXQoY29udGV4dFBhdGggKyBcIi9hcGkvZW5naW5lL2NoaWxkcmVuXCIsIGZ1bmN0aW9uKG5vZGVEYXRhKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCQoXCIuaW5mbyAuaW5mb1JvdyAudGl0bGVcIilbMl0pLmh0bWwoXCLku47lupPoioLngrnmlbDph49cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgkKFwiLmluZm8gLmluZm9Sb3cgLmRlc2NcIilbMl0pLmh0bWwobm9kZURhdGFbXCJub2Rlc1wiXSA/IG5vZGVEYXRhW1wibm9kZXNcIl0ubGVuZ3RoIDogMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBcImpzb25cIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLy8g54q25oCB5L+h5oGvXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdGF0dXNSb3dzID0gJChcIi5zdGF0dXMgLnN0YXR1c1Jvd1wiKTtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAgOyBpIDwgc3RhdHVzUm93cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJvdyA9ICQoc3RhdHVzUm93c1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBkYXRhW3N0YXR1c0ZpZWxkc1tpXV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdHVzRmllbGRzW2ldID09IFwibm9kZUdyb3VwSWRcIikgIHZhbHVlID0gdmFsdWU9PSBcIm1hc3RlclwiID8gXCLkuLvlupPoioLngrlcIiA6IFwi5LuO5bqT6IqC54K5XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChzdGF0dXNGaWVsZHNbaV0gPT0gXCJyZWdpc3RlcmVkXCIpICB2YWx1ZSA9IHZhbHVlID8gXCLlt7Lms6jlhoxcIiA6IFwi5pyq5rOo5YaMXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICByb3cuY2hpbGRyZW4oXCIuZGVzY1wiKS5odG1sKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gZGF0YTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICAgIH0sIFwianNvblwiKTtcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgIC8vIOaYvuekuueKtuaAgeS/oeaBr1xuICAgICAgICAgICAgLy8g5re75Yqg5oyJ6ZKu5LqL5Lu2XG4gICAgICAgICAgICBpZiAoZGF0YVtcInN0YXJ0ZWRcIl0pIHtcbiAgICAgICAgICAgICAgICAkKFwiLm9wZXJhQ29sIC5vblwiKS5jbGljayhmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICBzdG9wKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoXCIub3BlcmFDb2wgLm9mZlwiKS5jbGljayhmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICBzdGFydCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJvbXB0LmNsb3NlKCk7XG4gICAgICAgIH0pW1wiY2F0Y2hcIl0oZnVuY3Rpb24oZXJyKXtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZhciBzdGFydCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcHJvbXB0LmNvbnRlbnQoXCI8c3BhbiBjbGFzcz0nY29sIGxvYWRpbmcnPuivt+eojeWAme+8jOacjeWKoeWZqOWQr+WKqOS4reOAgjwvc3Bhbj48aW1nIGNsYXNzPSdjb2wgbG9hZGluZycgc3JjPSdcIitjb250ZXh0UGF0aCArIFwiL3MvaW1hZ2VzL2xvYWRpbmcuZ2lmXCIrXCInPlwiKTtcbiAgICAgICAgcHJvbXB0LnNob3dNb2RhbCgpO1xuICAgICAgICAkLnBvc3QoY29udGV4dFBhdGggKyBcIi9zeW0vc3RhcnRcIiAsIG51bGwsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICB2YXIgc3RhcnRJbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgJC5nZXQoY29udGV4dFBhdGggKyBcIi9hcGkvZW5naW5lL3N0YXR1c1wiLCBmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGFbXCJzdGFydGVkXCJdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHN0YXJ0SW50ZXJ2YWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgXCJqc29uXCIpO1xuICAgICAgICAgICAgfSwgMTAwMCk7XG5cbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICB2YXIgc3RvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcHJvbXB0LmNvbnRlbnQoXCI8c3BhbiBjbGFzcz0nY29sIGxvYWRpbmcnPuivt+eojeWAme+8jOacjeWKoeWZqOWBnOatouS4reOAgjwvc3Bhbj48aW1nIGNsYXNzPSdjb2wgbG9hZGluZycgc3JjPSdcIitjb250ZXh0UGF0aCArIFwiL3MvaW1hZ2VzL2xvYWRpbmcuZ2lmXCIrXCInPlwiKTtcbiAgICAgICAgcHJvbXB0LnNob3dNb2RhbCgpO1xuICAgICAgICAkLnBvc3QoY29udGV4dFBhdGggKyBcIi9zeW0vc3RvcFwiICwgbnVsbCwgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHZhciBzdG9wSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICQuZ2V0KGNvbnRleHRQYXRoICsgXCIvYXBpL2VuZ2luZS9zdGF0dXNcIiwgZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZGF0YVtcInN0YXJ0ZWRcIl0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoc3RvcEludGVydmFsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIFwianNvblwiKTtcbiAgICAgICAgICAgIH0sIDEwMDApO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHZhciBtb25pdGVTdGFydGVkID0gZnVuY3Rpb24oKXtcblxuICAgIH07XG59O1xubW9kdWxlLmV4cG9ydHM9bmV3IHN0YXRlKCk7IiwiLyoqXG4gKiDnvZHnq5lKU+WFpeWPo+aWh+S7tlxuICog5Z+65LqOSnF1ZXJ55byA5Y+RXG4gKiBAYXV0aG9yICAgIOWnmuWwpyA8eWFvZ2FveXVAcXEuY29tPlxuICovXG52YXIgX3BhZ2UgPSAkKFwiaHRtbFwiKS5hdHRyKFwiY2xhc3NcIik7XG52YXIgX3NjcmlwdHMgPSB7XG4gICAgXCJfbG9naW5cIiA6IHJlcXVpcmUoXCIuL19sb2dpblwiKSxcbiAgICBcIl9zdGF0ZVwiIDogcmVxdWlyZShcIi4vX3N0YXRlXCIpLFxuICAgIFwiX3NldHRpbmdcIiA6IHJlcXVpcmUoXCIuL19zZXR0aW5nXCIpLFxuICAgIFwiX25vZGVzXCIgOiByZXF1aXJlKFwiLi9fbm9kZXNcIiksXG4gICAgXCJfc2lkZUJhclwiOiByZXF1aXJlKFwiLi9fc2lkZUJhclwiKVxufTtcbnZhciBhdHRyaWJ1dGVzID0ge307XG5fc2NyaXB0c1tcIl9zaWRlQmFyXCJdLnBlcmZvcm0oKTtcbmlmIChfc2NyaXB0c1tfcGFnZV0pIF9zY3JpcHRzW19wYWdlXS5wZXJmb3JtKGF0dHJpYnV0ZXMpOyJdfQ==
$().ready(function(){require("www");});
